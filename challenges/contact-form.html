<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>The Amazing Company</title>
  <link rel="stylesheet" href="stylesheets/main.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster">
  <link rel="icon" type="image/ico" href="favicon.ico"/>
 </head>
 <body>

  <form class="form" id="form_id" action="thanks.html" method="post">
    <h2>Contact Information</h2>
    <label>
     Name
     <input class="type" type="text" name="name" placeholder="Full name" required>
    </label>
    <label>
     Email
     <input class="type" type="email" name="email" placeholder="johndoe@example.com" required>
    </label>
    <label>
     Phone Number
     <input class="type" type="tel" name="phone number" placeholder="(123) 456-7890">
    </label>
    <label>
     Message
     <br/>
     <textarea name="message"></textarea>
    </label>
    <br/>
    <input class="btn" type="submit" name="submit" value="Sign me up!">
   </form>

   <form id="tokenform" action="verify.php" method="post">
    <input type="hidden" id="gRecaptchaToken" name="gRecaptchaToken">
   </form>

 <script>
   document.querySelector('form.form').addEventListener('submit', function(e) {
     e.preventDefault();
     getToken(this);
     const formData = new FormData(this);
     const ents = formData.entries();

     for (var input of ents) {
       console.log(input[0] + ': ' + input[1]);
     }
     window.location.href = "thanks.html";
   });
 </script>

 <script src="https://www.google.com/recaptcha/api.js?render=6LdMqeEUAAAAADjKRev9D6Rxc_4CAqhNQM3-_hbf"></script>
 <script>
   function getToken(form) {
    grecaptcha.ready(function() {
        grecaptcha.execute('6LdMqeEUAAAAADjKRev9D6Rxc_4CAqhNQM3-_hbf', {action:'form_submit'})
                  .then(function(token) {
            // add token value to form
            document.getElementById('gRecaptchaToken').value = token;
	    form.submit();
        });
    });
   }
 </script>

 </body>
</html>