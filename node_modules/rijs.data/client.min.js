var data=function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var n=t;function t(e){return function(n){return n==e}}t.fn=function(e){return"function"==typeof e},t.str=function(e){return"string"==typeof e},t.num=function(e){return"number"==typeof e},t.obj=function(e){return"object"==typeof e},t.lit=function(e){return e.constructor==Object},t.bol=function(e){return"boolean"==typeof e},t.truthy=function(e){return 1==!!e},t.falsy=function(e){return 0==!!e},t.arr=function(e){return e instanceof Array},t.null=function(e){return null===e},t.def=function(e){return void 0!==e},t.in=function(e){return function(n){return!!e&&(e.indexOf?~e.indexOf(n):n in e)}},t.promise=function(e){return e instanceof Promise},t.stream=function(e){return!(!e||!e.next)};var r=Object.freeze({default:n,__moduleExports:n}),o=r&&n||r,u=function(e){return Object.keys(o.obj(e)||o.fn(e)?e:{})},f=Object.freeze({default:u,__moduleExports:u}),i=function(e,n){return function(t){return n[t]=e[t],t}},a=Object.freeze({default:i,__moduleExports:i}),c=f&&u||f,l=a&&i||a,s=function(e){return function(n){return c(n).map(l(n,e)),e}},d=Object.freeze({default:s,__moduleExports:s}),p=function(e){return function(){return e}},m=Object.freeze({default:p,__moduleExports:p}),h=function(e){return 0===e?"0":e?o.fn(e)?""+e:o.obj(e)?JSON.stringify(e):String(e):""},b=Object.freeze({default:h,__moduleExports:h}),y=m&&p||m,g=b&&h||b,v=function e(n,t){var r=arguments.length>1,u=o.fn(n)?[]:g(n).split(".").filter(Boolean),f=u.shift();return function(i,a){var l={};return i?o.num(n)||n?o.arr(n)?(n.map(function(n){var r=e(n)(i);null!=(r=o.fn(t)?t(r):null==r?t:r)&&e(n,o.fn(r)?y(r):r)(l)}),l):i[n]||!u.length?r?(i[n]=o.fn(t)?t(i[n],a):t,i):o.fn(n)?n(i):i[n]:r?(e(u.join("."),t)(i[f]?i[f]:i[f]={}),i):e(u.join("."))(i[f]):r?function(e,n){return c(e).map(function(n){delete e[n]}),c(n).map(function(t){e[t]=n[t]}),e}(i,t):i:void 0}},_=Object.freeze({default:v,__moduleExports:v}),j=_&&v||_,O=function(e,n){var t=1==arguments.length;return function(r){return r&&r.headers?t?j(e)(r.headers):j(e)(r.headers)==n:null}},E=Object.freeze({default:O,__moduleExports:O}),z=function(e){return function(){return!e.apply(this,arguments)}},w=Object.freeze({default:z,__moduleExports:z}),N=w&&z||w,S=function(e){return function(n){return c(n).filter(N(o.in(e))).map(l(n,e)),e}},k=Object.freeze({default:S,__moduleExports:S}),A=function e(n){return function(t){for(x in t)o.obj(t[x])&&o.obj(n[x])?e(n[x])(t[x]):n[x]=t[x];return n}};var P=Object.freeze({default:A,__moduleExports:A}),I=function e(n,t){var r=arguments.length;return o.str(n)||2!=r?o.str(n)||3!=r?function(e){var u=this||{};return e=(e=(e=u.nodeName||o.fn(u.node)?u:e).node?e.node():e).host||e,r>1&&!1===t?e.removeAttribute(n):r>1?(e.setAttribute(n,t),t):e.attributes.getNamedItem(n)&&e.attributes.getNamedItem(n).value}:e(arguments[1],arguments[2]).call(this,arguments[0]):e(arguments[1]).call(this,arguments[0])},$=Object.freeze({default:I,__moduleExports:I}),J=function(){var e,n,t=new Promise(function(t,r){e=t,n=r});return arguments.length&&e(arguments[0]),t.resolve=e,t.reject=n,t};var B=Object.freeze({default:J,__moduleExports:J}),D=function e(n,t){return t instanceof Array&&(t=t.reduce(e,[])),(n=n||[]).concat(t)},q=Object.freeze({default:D,__moduleExports:D}),C=function(e,n){return n in e},F=Object.freeze({default:C,__moduleExports:C}),G=F&&C||F,H=function(e,n,t,r){return e.host&&e.host.nodeName&&(e=e.host),n.name&&(t=n,n=n.name),!G(e,n)&&Object.defineProperty(e,n,{value:t,writable:r}),e[n]},K=Object.freeze({default:H,__moduleExports:H}),L=B&&J||B,M=q&&D||q,Q=K&&H||K,R=function(){},T=function e(n,t){return t=t||{},Q(n=n||{},"emit",function(e,t,o){for(var u=n.on[e.split(".")[0]]||[],f=[],i=0;i<u.length;i++)u[i].ns&&o&&!o(u[i].ns)||f.push(r(u[i].isOnce?u.splice(i--,1)[0]:u[i],t));for(var i=0;i<n.on["*"].length;i++)f.push(r(n.on["*"][i],[e,t]));return f.reduce(M,[])},1),Q(n,"once",function(e,t){return n.on(e,t,!0)},1),Q(n,"off",function(e,t){o(n.on[e]||[],t),t&&t.ns&&delete n.on[e]["$"+t.ns];return n},1),Q(n,"on",function(e,r,f){var i=e.split(".")[0],a=e.split(".")[1],c=n.on[i]=n.on[i]||[],l="function"==typeof r?r:0;return!l&&a?(l=n.on[i]["$"+a])?l:s(u(n,r)):l||a?l&&a?s((o(c,n.on[i]["$"+a]||-1),l)):!(!l||a)&&s(l):s(u(n,r));function s(e){return e.isOnce=f,e.type=i,a&&(n.on[i]["$"+(e.ns=a)]=e),c.push(e),(t.on||R)(e),e.next?e:n}},1),n.on["*"]=n.on["*"]||[],n;function r(e,t){return e.next?e.next(t):t instanceof Array?e.apply(n,t):e.call(n,t)}function o(e,n){for(var r=e.length;~--r;)n!=e[r]&&n!=e[r].fn&&n||(t.off||R)(e.splice(r,1)[0])}function u(n,t){var r=e((t=t||{}).base||L());return r.i=0,r.li=[],r.fn=t.fn,r.parent=n,r.source=t.fn?r.parent.source:r,r.on("stop",function(e){return r.type?r.parent.off(r.type,r):r.parent.off(r),r.reason=e}),r.each=function(e){var n=e.next?e:u(r,{fn:e});return r.li.push(n),n},r.pipe=function(e){return e(r)},r.map=function(e){return r.each(function(n,t,r){return r.next(e(n,t,r))})},r.filter=function(e){return r.each(function(n,t,r){return e(n,t,r)&&r.next(n)})},r.reduce=function(e,n){return r.each(function(t,r,o){return o.next(n=e(n,t,r,o))})},r.unpromise=function(){var e=u(r,{base:{},fn:function(n){return e.next(n)}});return r.li.push(e),e},r.next=function(e){return r.resolve&&r.resolve(e),r.li.length?r.li.map(function(n){return n.fn(e,n.i++,n)}):e},r.until=function(e){return e?e.each?e.each(r.stop):e.then?e.then(r.stop):e.call?r.filter(e).map(r.stop):0:0},r.off=function(e){return o(r.li,e),r},r.start=function(e){return r.until(e),r.source.emit("start"),r},r.stop=function(e){return r.source.emit("stop",e)},r[Symbol.asyncIterator]=function(){return{next:function(){return r.wait=new Promise(function(e){r.wait=!0,r.map(function(n,t,o){delete r.wait,r.off(o),e({value:n,done:!1})}),r.emit("pull",r)})}}},r}},U=Object.freeze({default:T,__moduleExports:T}),V=U&&T||U,W={add:function(e,n,t){o.arr(e)?e.splice(n,0,t):e[n]=t},update:function(e,n,t){if(o.num(n)||n)e[n]=t;else{if(!o.obj(t))return!0;for(var r in e)delete e[r];for(var r in t)e[r]=t[r]}},remove:function(e,n){o.arr(e)?e.splice(n,1):delete e[n]}},X=JSON.stringify,Y=JSON.parse,Z=function(e,n){return function(t,r,u){if(!o.obj(t)&&!o.fn(t))return t;if(!o.obj(e)){var f=r||t.log||[],i=t;if(o.def(u)||(u=f.max||0),u||(f=[]),u<0&&(f=f.concat(null)),u>0){var a=X(t);i=Y(a),f=f.concat({type:"update",value:Y(a),time:f.length})}return Q(f,"max",u),i.log?i.log=f:Q(V(i,null),"log",f,1),i}return!!o.def(e.key)&&(!!function e(n,t,r,o){var u=r.shift();if(!W[t])return!1;if(r.length){if(!(u in n)){if("remove"==t)return!0;n[u]={}}return e(n[u],t,r,o)}return!W[t](n,u,o)}(t,e.type,(e.key=""+e.key).split(".").filter(Boolean),e.value)&&(t.log&&t.log.max&&t.log.push((e.time=t.log.length,t.log.max>0?e:null)),!n&&t.emit&&t.emit("change",e),t))}};var ee=Object.freeze({default:Z,__moduleExports:Z}),ne={arr:function(e){return Array.prototype.slice.call(e,0)},obj:function(e){var n="id";return 1==arguments.length?(n=e,t):t.apply(this,arguments);function t(e,t,r){return 0===r&&(e={}),e[o.fn(n)?n(t,r):t[n]]=t,e}}};var te=ne.arr,re=ne.obj,oe=Object.freeze({default:ne,__moduleExports:ne,arr:te,obj:re}),ue="undefined"!=typeof window,fe=Object.freeze({default:ue,__moduleExports:ue}),ie=fe&&ue||fe?window:e,ae=Object.freeze({default:ie,__moduleExports:ie}),ce=oe&&ne||oe,le=ae&&ie||ae,se=function(e){return function(n){if(!le.console||!console.log.apply)return n;o.arr(arguments[2])&&(arguments[2]=arguments[2].length);var t=ce.arr(arguments),r="[log]["+(new Date).toISOString()+"]"+e;return t.unshift(r.grey?r.grey:r),console.log.apply(console,t),n}},de=Object.freeze({default:se,__moduleExports:se}),pe=d&&s||d,me=E&&O||E,he=k&&S||k,be=P&&A||P,ye=$&&I||$,ge=ee&&Z||ee,ve=(de&&se||de)("[ri/types/data]"),xe=j("body.on");return function(e){return ve("creating"),e.on("change.data").filter(function(n){var t=n[0];return n[1],me("content-type","application/data")(e.resources[t])}).filter(function(e){e[0];var n=e[1];return n&&n.key}).map(function(n){var t=n[0],r=n[1];return e.resources[t].body.emit("change",r||null,N(o.in(["bubble"])))}),e.types["application/data"]={header:"application/data",ext:"*.data.js",selector:function(e){return'[data~="'+e.name+'"]'},extract:function(e){return(ye("data")(e)||"").split(" ")},check:function(e){return o.obj(e.body)},load:function(n){var t=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}(n.headers.path);return t=t.default||t,t=o.fn(t)?t(e):t,n.headers["content-type"]=this.header,e(be(n)(t)),e.resources[n.name]},parse:function(n){var t=e.resources[n.name]||{};return he(n.headers)(t.headers),n.body=ge()(n.body||[],t.body&&t.body.log,o.num(n.headers.log)?n.headers.log:-1),pe(n.body.on)(xe(t)),n.body.on("change.bubble",function(t){e.emit("change",e.change=[n.name,t],N(o.in(["data"]))),delete e.change}),n.headers.loaded&&!n.headers.loading&&(n.headers.loading=Promise.resolve(n.headers.loaded(e,n)).then(function(){return delete n.headers.loading,n})),n}},e}}();
